{% extends "base.html" %}
{% block content %}
    <div class="card-wrapper">
        <div class="card">
            <h1 class="center">ADD Tutorial</h1>
            <form class="add_tut" name="add_tut" method="post">
                <label for="course" class="label">Course</label>
                <select id="course" name="course" class="field" required>
                    <option value="" disabled selected>Select a course</option>
                    {% for course in courses %}
                        <option value="{{ course }}">{{ course }}</option>
                    {% endfor %}
                </select>

                <label for="name" class="label">Tutorial Name</label>
                <input id="name"
                       type="text"
                       name="tutorial_name"
                       class="field"
                       placeholder="Tutorial Name"
                       required />

                <label for="description" class="label">Description</label>
                <textarea id="description"
                          name="tutorial_description"
                          class="field"
                          placeholder="Description"
                          required></textarea>

                <label for="release_date" class="label">Release Date</label>
                <input id="release_date"
                       type="date"
                       name="tutorial_release_date"
                       class="field"
                       required />

                <label for="due_date" class="label">Due Date</label>
                <input id="due_date"
                       type="date"
                       name="tutorial_due_date"
                       class="field"
                       required />

                <label for="answer_release_date" class="label">Answer Release Date</label>
                <input id="answer_release_date"
                       type="date"
                       name="tutorial_answer_release_date"
                       class="field"
                       required />

                <div id="questions-section">
                    <label class="label">Questions</label>
                    <div class="question" id="question-1">
                        <label for="question-1-text" class="label">Question 1</label>
                        <input id="question-1-text"
                               type="text"
                               name="questions[0][question_text]"
                               class="field"
                               placeholder="Enter question text"
                               required />
                    </div>
                </div>
                <button type="button" id="add-question" class="btn">Add Question</button>

                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        const questionsSection = document.getElementById('questions-section');
                        const addQuestionButton = document.getElementById('add-question');
                        let questionCount = 1;

                        addQuestionButton.addEventListener('click', function () {
                            questionCount++;
                            const newQuestion = document.createElement('div');
                            newQuestion.classList.add('question');
                            newQuestion.id = `question-${questionCount}`;
                            newQuestion.innerHTML = `
                                <label for="question-${questionCount}-text" class="label">Question ${questionCount}</label>
                                <input id="question-${questionCount}-text"
                                       type="text"
                                       name="questions[${questionCount - 1}][question_text]"
                                       class="field"
                                       placeholder="Enter question text"
                                       required />
                            `;
                            questionsSection.appendChild(newQuestion);
                        });
                    });
                </script>

                <p class="error error--hidden"></p>
                <input type="submit" value="ADD TUTORIAL" class="btn" id="submit" />
            </form>
        </div>
    </div>
    
    <script src="/static/add_tutorial/script.js"></script>
{% endblock content %}
